<!DOCTYPE html>
<html lang="en" style="scroll-behavior: smooth;">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veptra</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb;
            color: #333;
        }

        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #e2e8f0;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background-color: #64748b;
            border-radius: 10px;
            border: 2px solid #f7f9fb;
        }

        /* Hero section background with a subtle gradient */
        .hero-bg {
            background-color: #e3f2fd;
            background-image: linear-gradient(to top right, #e3f2fd, #bbdefb);
        }

        /* Styling for the custom message box */
        .message-box-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .message-box-content {
            background: white;
            padding: 24px;
            border-radius: 12px;
            max-width: 90%;
            width: 400px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            text-align: center;
        }
    </style>
</head>

<body class="antialiased">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex flex-col md:flex-row justify-between items-center">
            <a href="#home" class="flex items-center space-x-2">
                <!-- Updated with a new SVG logo -->
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-10 w-auto text-blue-600 rounded-full">
                    <circle cx="12" cy="12" r="10" stroke="#60A5FA" stroke-width="2" fill="#DBEAFE"/>
                    <path d="M12 4.5V19.5" stroke="#2563EB" stroke-width="2" stroke-linecap="round"/>
                    <path d="M8 8L16 16" stroke="#2563EB" stroke-width="2" stroke-linecap="round"/>
                    <path d="M16 8L8 16" stroke="#2563EB" stroke-width="2" stroke-linecap="round"/>
                    <path d="M8.5 12h7" stroke="#2563EB" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <h1 class="text-2xl font-bold text-gray-800">Veptra</h1>
            </a>
            <!-- Navigation Links -->
            <nav class="mt-4 md:mt-0 flex items-center space-x-4 sm:space-x-6">
                <ul class="flex space-x-4 sm:space-x-6">
                    <li><a href="#home" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Home</a></li>
                    <li><a href="#product-list" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Product List</a></li>
                    <li><a href="#checkout" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Order</a></li>
                    <li><a href="#faq-section" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">FAQs</a></li>
                    <li><a href="#contact-us" class="text-gray-600 hover:text-blue-600 font-medium transition-colors">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-12">
        <!-- Home Section -->
        <section id="home" class="hero-bg py-24 text-center rounded-xl shadow-lg mb-12">
            <div class="container mx-auto px-4">
                <h1 class="text-6xl font-extrabold text-gray-900 mb-4 animate-fade-in-up">Discover Purity. Define Research.</h1>
                <p class="text-xl text-gray-700 max-w-2xl mx-auto mb-8 animate-fade-in">Explore our collection of high-purity peptides for your scientific studies and laboratory needs.</p>
                <a href="#product-list" class="inline-flex items-center justify-center bg-blue-600 text-white font-semibold py-4 px-8 rounded-full shadow-lg hover:bg-blue-700 transition-colors transform hover:scale-105">
                    View Products
                </a>
            </div>
        </section>

        <!-- What are Peptides? Section -->
        <section id="peptide-description" class="bg-blue-50 border-l-4 border-blue-500 p-6 rounded-xl mb-12 shadow-sm">
            <h3 class="text-2xl font-semibold text-gray-800 mb-4">What Are Peptides?</h3>
            <p class="text-gray-700 leading-relaxed">
                Peptides are short chains of amino acids, the building blocks of proteins. They play a vital role in many biological processes. Research peptides are compounds used exclusively in laboratory and scientific studies to explore their potential effects and mechanisms. Our products are intended solely for these research applications.
            </p>
        </section>

        <!-- Product List Section -->
        <section id="product-list" class="my-12">
            <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-8">Product List</h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
                <!-- Product cards will be inserted here by JavaScript -->
            </div>
        </section>

        <!-- Checkout Section (Now uses Fetch API to submit) -->
        <section id="checkout" class="my-16">
            <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-8">Your Order</h2>
            <div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-lg">
                <div id="cart-summary" class="mb-6 space-y-4">
                    <!-- Cart items will be rendered here -->
                </div>
                <div id="empty-cart-message" class="text-center text-gray-500 hidden">
                    Your cart is empty. Please add some products to continue.
                </div>
                <div id="order-total-container" class="border-t pt-4 mt-4 hidden">
                    <p class="text-lg font-semibold flex justify-between items-center">
                        <span>Total:</span>
                        <span id="order-total" class="text-blue-600">₱0</span>
                    </p>
                </div>
                <!-- Form is now set up for AJAX submission -->
                <form id="checkout-form" class="mt-8">
                    <h3 class="text-2xl font-semibold text-gray-800 mb-4">Client Information</h3>
                    <div class="space-y-4">
                        <label class="block">
                            <span class="text-gray-700 font-medium">Your Name</span>
                            <input type="text" id="client-name" name="name" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 p-2.5">
                        </label>
                        <label class="block">
                            <span class="text-gray-700 font-medium">Contact Number</span>
                            <input type="tel" id="client-phone" name="phone" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 p-2.5">
                        </label>
                        <label class="block">
                            <span class="text-gray-700 font-medium">Email Address</span>
                            <input type="email" id="client-email" name="email" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50 p-2.5">
                        </label>
                        <!-- Hidden field to hold the full structured order data -->
                        <textarea name="order_summary" id="order-summary-input" hidden></textarea>
                    </div>
                    <button type="submit" id="submit-order-btn" class="mt-8 w-full bg-green-600 text-white font-semibold py-3 px-6 rounded-lg hover:bg-green-700 transition-colors shadow-lg disabled:bg-gray-400 disabled:cursor-not-allowed" disabled>
                        Send Order Directly
                    </button>
                    <p class="mt-4 text-sm text-center text-gray-500">
                        By clicking "Send Order Directly", the order will be submitted via API.
                    </p>
                </form>
            </div>
        </section>

        <!-- FAQ Section -->
        <section id="faq-section" class="my-16">
            <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-8">Frequently Asked Questions</h2>
            <div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-lg">
                <h3 class="text-2xl font-bold mb-4">Tirzepatide FAQ (Simple Guide)</h3>
                
                <p class="font-semibold mt-6">What is Tirzepatide?</p>
                <p class="text-gray-700 leading-relaxed mb-4">It is a once-a-week injection that works on two hormones (GIP and GLP-1). It helps lower blood sugar and reduce weight.</p>
                
                <p class="font-semibold mt-6">What is it used for?</p>
                <p class="text-gray-700 leading-relaxed mb-4">Doctors use it for type 2 diabetes and for long-term weight management in people with obesity or overweight plus health risks.</p>
                
                <p class="font-semibold mt-6">How well does it work?</p>
                <p class="text-gray-700 leading-relaxed mb-4">Studies show people lose a lot of weight and lower blood sugar more than many older medicines. It can even work better than semaglutide in some trials.</p>
                
                <p class="font-semibold mt-6">How is it taken?</p>
                <p class="text-gray-700 leading-relaxed mb-4">It is injected under the skin once a week. The dose starts small and increases slowly to avoid side effects.</p>
                
                <p class="font-semibold mt-6">What are common side effects?</p>
                <p class="text-gray-700 leading-relaxed mb-4">Nausea, vomiting, diarrhea, constipation, and stomach pain. These usually happen when starting or raising the dose.</p>
                
                <p class="font-semibold mt-6">What are serious risks?</p>
                <ul class="list-disc list-inside text-gray-700 leading-relaxed mb-4">
                    <li>May cause thyroid tumors (seen in animals, not proven in people).</li>
                    <li>Risk of pancreatitis (severe belly pain).</li>
                    <li>Low blood sugar if taken with insulin or some diabetes pills.</li>
                </ul>
                
                <p class="font-semibold mt-6">Who should not use it?</p>
                <p class="text-gray-700 leading-relaxed mb-4">People with a history of thyroid cancer (MTC), MEN2, past pancreatitis, or allergy to the drug should avoid it.</p>
                
                <p class="font-semibold mt-6">Pregnancy and birth control</p>
                <p class="text-gray-700 leading-relaxed mb-4">Not safe for pregnancy. Stop if you get pregnant. It may reduce the effect of birth control pills, so use another method while on it.</p>
                
                <p class="font-semibold mt-6">Do we know the long-term effects?</p>
                <p class="text-gray-700 leading-relaxed mb-4">We know it improves weight, sugar, blood pressure, and cholesterol. Heart and kidney outcome studies are still ongoing.</p>
                
                <p class="font-semibold mt-6">Summary</p>
                <p class="text-gray-700 leading-relaxed mb-4">Tirzepatide is a strong new option for diabetes and obesity. It works well but has risks. Always talk to your doctor before use.</p>
            </div>
        </section>

        <!-- Contact Us Section (MOBILE FRIENDLY BLOCKS) -->
        <section id="contact-us" class="my-16">
            <h2 class="text-4xl font-extrabold text-gray-900 text-center mb-8">Contact Us</h2>
            <div class="max-w-3xl mx-auto bg-white p-8 rounded-xl shadow-lg text-center">
                <p class="text-gray-700 mb-8 font-semibold text-xl">We are available through:</p>
                <div class="flex flex-col sm:flex-row justify-center items-center space-y-6 sm:space-y-0 sm:space-x-8">

                    <!-- Viber Link (Touch Target Enhanced) -->
                    <a href="viber://chat?number=+639190774570" class="inline-flex flex-col items-center space-y-2 p-6 w-full max-w-xs sm:w-auto bg-purple-50 rounded-xl hover:bg-purple-100 transition-colors shadow-md text-purple-600 hover:text-purple-800 font-semibold group transform hover:scale-[1.02]">
                        <!-- Generic Chat/Communication Icon for Viber -->
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 group-hover:scale-105 transition-transform" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 2H4C2.9 2 2 2.9 2 4v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM10 13H7c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1zm4 0h-3c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1zm4 0h-3c-.55 0-1-.45-1-1s.45-1 1-1h3c.55 0 1 .45 1 1s-.45 1-1 1z"/>
                        </svg>
                        <span class="text-lg">Message on Viber</span>
                        <span class="text-sm text-gray-500">(09190774570)</span>
                    </a>

                    <!-- Email Link (Touch Target Enhanced) -->
                    <a href="mailto:veptraph@gmail.com" class="inline-flex flex-col items-center space-y-2 p-6 w-full max-w-xs sm:w-auto bg-blue-50 rounded-xl hover:bg-blue-100 transition-colors shadow-md text-blue-600 hover:text-blue-800 font-semibold group transform hover:scale-[1.02]">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 group-hover:scale-105 transition-transform" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                        </svg>
                        <span class="text-lg">Send an Email</span>
                        <span class="text-sm text-gray-500">(veptraph@gmail.com)</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- Footer with Disclaimer -->
        <footer class="bg-gray-800 text-white py-12 px-4 text-center">
            <div class="container mx-auto max-w-4xl">
                <h3 class="text-2xl font-bold mb-4 text-red-400">Disclaimer</h3>
                <p class="text-gray-300 leading-relaxed mb-4">
                    The statements on this website have not been evaluated by the Philippine Food and Drug Administration (FDA). Our products are not intended to diagnose, treat, cure, or prevent any disease.
                </p>
                <p class="text-gray-300 leading-relaxed mb-4">
                    **All products are for laboratory research use only and are not for human consumption.** Veptra operates exclusively as a chemical supplier and is not a compounding pharmacy. Our products are intended solely for in-vitro and pre-clinical research purposes.
                </p>
                <p class="text-gray-300 leading-relaxed mb-6">
                    By purchasing these products, you acknowledge that you have the necessary equipment, facilities, and expertise to handle them safely. You accept all risks associated with their handling, use, and distribution. You agree to indemnify and hold Veptra harmless from any claims made by third parties resulting from your use of these products outside of their intended research applications.
                </p>
                <p class="text-gray-400 text-sm">&copy; 2024 Veptra. All rights reserved.</p>
            </div>
        </footer>
    
        <!-- Message Box Container -->
        <div id="message-box" class="message-box-backdrop hidden">
            <div id="message-box-content" class="message-box-content">
                <!-- Content injected by JavaScript -->
            </div>
        </div>

    <script>
        // Product data is unchanged from the last step
        const products = [
            {
                id: 7,
                name: 'Tirzepatide 15mg',
                price: 2500,
                description: 'A dual GIP/GLP-1 receptor agonist for scientific research, often studied for its effects on weight management and glucose regulation.',
                image: 'https://placehold.co/400x400/F0F4F8/64748b?text=T15'
            },
            {
                id: 8,
                name: 'Tirzepatide 30mg',
                price: 4000,
                description: 'A higher-concentration research compound for dual GIP/GLP-1 receptor studies.',
                image: 'https://placehold.co/400x400/F0F4F8/64748b?text=T30'
            },
            {
                id: 3,
                name: 'GHK-Cu',
                price: 1000,
                description: 'A copper peptide complex widely researched for its role in tissue regeneration, skin health, and anti-inflammatory mechanisms.',
                image: 'https://placehold.co/400x400/F0F4F8/64748b?text=GHK-Cu'
            },
            {
                id: 4,
                name: 'Selank',
                price: 1300,
                description: 'A synthetic peptide known for its anxiolytic and nootropic properties, often studied for anxiety and cognitive enhancement.',
                image: 'https://placehold.co/400x400/F0F4F8/64748b?text=SELANK'
            },
            {
                id: 5,
                name: 'Semax',
                price: 1300,
                description: 'A nootropic peptide studied for its effects on memory, focus, and neuroprotective capabilities.',
                image: 'https://placehold.co/400x400/F0F4F8/64748b?text=SEMAX'
            },
            {
                id: 9,
                name: 'Retatrutide 10mg',
                price: 2500,
                description: 'A triple-agonist peptide (GIP, GLP-1, Glucagon) undergoing research for its potent effects on metabolism and weight loss studies.',
                image: 'https://placehold.co/400x400/F0F4F8/64748b?text=R10'
            },
            {
                id: 10,
                name: 'KPV',
                price: 1000,
                description: 'A tripeptide with potent anti-inflammatory and antimicrobial properties, derived from the alpha-MSH hormone.',
                image: 'https://placehold.co/400x400/F0F4F8/64748b?text=KPV'
            }
        ];

        let cart = [];

        // API Placeholder URL
        const ORDER_API_ENDPOINT = 'https://your-serverless-function.com/send-order';
        
        // DOM elements
        const productGrid = document.querySelector('#product-list > div');
        const cartSummary = document.getElementById('cart-summary');
        const emptyCartMessage = document.getElementById('empty-cart-message');
        const orderTotalContainer = document.getElementById('order-total-container');
        const orderTotalDisplay = document.getElementById('order-total');
        const checkoutForm = document.getElementById('checkout-form');
        const submitOrderBtn = document.getElementById('submit-order-btn');
        const orderSummaryInput = document.getElementById('order-summary-input');
        const messageBox = document.getElementById('message-box');
        const messageBoxContent = document.getElementById('message-box-content');
        
        // Custom message box utility function (Replaces alert())
        function showMessageBox(title, body, type = 'info') {
            let iconHtml = '';
            let color = 'text-blue-500';
            if (type === 'success') {
                iconHtml = `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto mb-3" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"/></svg>`;
                color = 'text-green-600';
            } else if (type === 'error') {
                iconHtml = `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto mb-3" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>`;
                color = 'text-red-600';
            } else if (type === 'api_info') {
                 iconHtml = `<svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto mb-3" viewBox="0 0 24 24" fill="currentColor"><path d="M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/></svg>`;
                color = 'text-yellow-600';
            }

            messageBoxContent.innerHTML = `
                <div class="${color}">
                    ${iconHtml}
                </div>
                <h4 class="text-xl font-bold mb-3">${title}</h4>
                <p class="text-gray-700 mb-6 text-sm">${body}</p>
                <button id="close-message-box" class="bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">OK</button>
            `;
            messageBox.classList.remove('hidden');

            document.getElementById('close-message-box').onclick = () => {
                messageBox.classList.add('hidden');
            };
        }


        // Function to render the product grid (unchanged)
        function renderProducts() {
            productGrid.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card bg-white p-6 rounded-xl shadow-lg hover:shadow-xl transition-shadow flex flex-col items-center text-center cursor-pointer';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="rounded-lg mb-4 w-48 h-48 object-cover">
                    <h3 class="text-xl font-semibold text-gray-800 mb-2">${product.name}</h3>
                    <p class="text-sm text-gray-500 flex-grow mb-4">${product.description}</p>
                    <div class="mt-auto w-full flex flex-col items-center space-y-2">
                        <span class="text-2xl font-bold text-blue-600">₱${product.price}</span>
                        <div class="flex items-center space-x-2">
                            <label for="quantity-${product.id}" class="text-gray-700">Qty:</label>
                            <input type="number" id="quantity-${product.id}" value="1" min="1" class="w-16 text-center border rounded-md border-gray-300 focus:ring-blue-200 focus:border-blue-300">
                        </div>
                        <button class="add-to-cart-btn bg-blue-600 text-white font-semibold py-2 px-4 rounded-full hover:bg-blue-700 transition-colors" data-id="${product.id}">Add to Cart</button>
                    </div>
                `;
                productGrid.appendChild(productCard);
            });
            attachAddToCartListeners();
        }

        function attachAddToCartListeners() {
            document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const productId = parseInt(event.target.dataset.id);
                    const quantityInput = document.getElementById(`quantity-${productId}`);
                    const quantity = parseInt(quantityInput.value);
                    const productToAdd = products.find(p => p.id === productId);

                    if (productToAdd && quantity > 0) {
                        const existingCartItem = cart.find(item => item.id === productId);
                        if (existingCartItem) {
                            existingCartItem.quantity += quantity;
                        } else {
                            cart.push({ ...productToAdd,
                                quantity
                            });
                        }
                        updateCart();
                        quantityInput.value = 1; // Reset quantity input
                    }
                });
            });
        }

        function updateCart() {
            cartSummary.innerHTML = '';
            let total = 0;
            if (cart.length > 0) {
                emptyCartMessage.classList.add('hidden');
                orderTotalContainer.classList.remove('hidden');
                submitOrderBtn.disabled = false;
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;

                    const cartItemEl = document.createElement('div');
                    cartItemEl.className = 'flex items-center space-x-4 border rounded-lg p-4 bg-gray-50';
                    cartItemEl.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="w-16 h-16 rounded-lg">
                        <div class="flex-grow">
                            <h4 class="font-semibold text-gray-800">${item.name}</h4>
                            <p class="text-sm text-gray-600">₱${item.price} x ${item.quantity}</p>
                        </div>
                        <span class="font-bold text-blue-600">₱${itemTotal}</span>
                        <button class="remove-from-cart-btn text-red-500 hover:text-red-700 transition-colors" data-id="${item.id}">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-.71-.71A.996.996 0 0014 3H10c-.39 0-.7.31-.79.71L9.5 4H8c-1.1 0-2 .9-2 2h12c0-1.1-.9-2-2-2h-2z" />
                            </svg>
                        </button>
                    `;
                    cartSummary.appendChild(cartItemEl);
                });
                attachRemoveFromCartListeners();
            } else {
                emptyCartMessage.classList.remove('hidden');
                orderTotalContainer.classList.add('hidden');
                submitOrderBtn.disabled = true;
            }
            orderTotalDisplay.textContent = `₱${total}`;
        }

        function attachRemoveFromCartListeners() {
            document.querySelectorAll('.remove-from-cart-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const productId = parseInt(event.target.closest('button').dataset.id);
                    cart = cart.filter(item => item.id !== productId);
                    updateCart();
                });
            });
        }

        // Handle form submission with Fetch API
        checkoutForm.addEventListener('submit', async (event) => {
            event.preventDefault();

            // 1. Collect Client Data
            const clientName = document.getElementById('client-name').value;
            const clientPhone = document.getElementById('client-phone').value;
            const clientEmail = document.getElementById('client-email').value;

            // 2. Prepare Structured Order Data
            const orderItems = cart.map(item => ({
                name: item.name,
                quantity: item.quantity,
                unit_price: item.price,
                total_item_price: item.price * item.quantity
            }));
            const totalAmount = orderItems.reduce((sum, item) => sum + item.total_item_price, 0);

            const payload = {
                client: {
                    name: clientName,
                    phone: clientPhone,
                    email: clientEmail
                },
                order_details: orderItems,
                total_amount: totalAmount,
                timestamp: new Date().toISOString()
            };

            // Convert the structured data to a clean JSON string for the hidden field 
            // and potential API consumption.
            const payloadString = JSON.stringify(payload, null, 2);
            orderSummaryInput.value = payloadString;
            
            // --- This block is the core change for API submission ---

            showMessageBox(
                'Submission Setup Required',
                `The form is ready to submit the order directly via an API call! 
                <br><br>
                **Next Step:** In a production environment, you must replace the placeholder URL with your active serverless function or email service endpoint.
                <br><br>
                **Placeholder API Endpoint:** <code class="bg-gray-200 p-1 rounded-md text-xs block mt-2 whitespace-normal">${ORDER_API_ENDPOINT}</code>`,
                'api_info'
            );
            
            // In a real application, you would proceed with the fetch call:
            /*
            try {
                const response = await fetch(ORDER_API_ENDPOINT, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                if (response.ok) {
                    showMessageBox('Order Sent!', 'Thank you! Your order has been submitted directly and we will contact you shortly.', 'success');
                    // Optional: Clear cart and form here
                } else {
                    const errorText = await response.text();
                    showMessageBox('Submission Failed', \`There was an issue processing your order. Server response: \${errorText}.\`, 'error');
                }
            } catch (error) {
                showMessageBox('Connection Error', 'Could not connect to the order processing service. Please check your network or try again later.', 'error');
            }
            */
            // --- End of core change ---
        });

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            renderProducts();
            updateCart();
        });
    </script>
</body>

</html>
